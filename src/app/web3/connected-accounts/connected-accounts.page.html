<ion-content [fullscreen]="true" class="web3-connected-account-page">
  <div class="ion-text-center ion-margin-bottom">
    <img alt="xterium" src="./../../../assets/icon/xterium-logo.png" class="logo" />
  </div>

  <div class="ion-padding">
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <div class="ion-text-center ion-padding-start ion-padding-end ion-padding-bottom" style="margin-top: -75px;">
            <h1 style="font-weight: bold">
              Connected Accounts
            </h1>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <div class="wallet-container">
            @if (chains.length > 0) {
            @for (chain of chains; track chain) {
            @if (walletsByChain[chain.id] && walletsByChain[chain.id].length > 0) {
            <div class="chain-label">
              <img [src]="'./../../../../assets/images/chains/' + chain.image" height="25" />
              {{ chain.name }}
            </div>
            @for (wallet of walletsByChain[chain.id]; track wallet) {
            <ion-list>
              <ion-item class="wallet-item" lines="none" (click)="toggleCheckbox(wallet, $event)">
                <ion-checkbox slot="start" class="wallet-checkbox" [checked]="isWalletSelected(wallet)"
                  (click)="$event.stopPropagation()" (ionChange)="toggleCheckbox(wallet, $event)"></ion-checkbox>
                <ion-label>
                  <h2>{{ wallet.name }}</h2>
                  <p>{{ truncateAddress(wallet.public_key) }}</p>
                </ion-label>
              </ion-item>
            </ion-list>
            }
            }
            }
            }
            @else {
            <div class="ion-text-center ion-padding">
              <p>No wallets available to connect.</p>
            </div>
            }
            @if (wallets.length === 0) {
            <div class="ion-text-center ion-padding">
              <p>No wallets available to connect.</p>
            </div>
            }
          </div>

          @if (selectedWallets.length > 0) {
          <div class="ion-text-center ion-padding">
            <p>{{ selectedWallets.length }} account(s) selected</p>
          </div>
          }
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <div class="ion-padding-horizontal">
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <div class="primary-button-wrapper">
            <ion-button expand="block" size="default" class="ion-margin-bottom" (click)="connect()"
              [disabled]="selectedWallets.length === 0">
              Connect
            </ion-button>
          </div>
        </ion-col>
        <ion-col size="6">
          <div class="primary-button-wrapper">
            <ion-button expand="block" size="default" class="ion-margin-bottom danger-button" (click)="reject()">
              @if (selectedWallets.length === 0) {
              Close
              }
              @else {
              Reject
              }
            </ion-button>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-footer>